# 開発用Dockerfile
FROM golang:1.21-alpine

# 必要なパッケージをインストール
RUN apk add --no-cache git ca-certificates tzdata wget make

# 作業ディレクトリを設定
WORKDIR /app

# Goモジュールファイルをコピー
COPY go.mod go.sum ./

# 依存関係をダウンロード
RUN go mod download

# 開発ツールをインストール
RUN go install github.com/cosmtrek/air@latest
RUN go install github.com/golangci/golangci-lint/cmd/golangci-lint@latest
RUN go install github.com/securecodewarrior/gosec/v2/cmd/gosec@latest

# ソースコードをコピー
COPY . .

# 開発用のエントリーポイント
CMD ["air", "-c", ".air.toml"]
